<!DOCTYPE html>
<html ng-app="jrzhApp" ng-controller="jrzhCtrl">

	<head>
		<meta charset="utf-8">
		<title>个人账户</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">

		<link rel="stylesheet" href="../../css/libs/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../../css/style.css" />
		<link rel="stylesheet" type="text/css" href="../../css/fonts/iconfont.css" />
	</head>

	<body>
		<div class="personal-top">
			<div class="pson-top">
				<img src="../../imgs/temp/wxtx.jpg" alt="" class="bg" />
				<div class="pson-top-info">
					<span class="leaguer mui-pull-left">金牌会员</span>
					<span class="set_btn mui-pull-right mui-icon mui-icon mui-icon-gear"></span>
					<div class="c">
						<img src="../../imgs/temp/wxtx.jpg" alt="" />
						<strong>
							<span class="name">张怀云</span>
							<span class="leve">VIP</span>
						</strong>
					</div>
					<div class="b">
						<div class="mui-pull-left">
							<strong>积分</strong>
							<span>{{accountData.integral}}</span>
						</div>
						<div class="mui-pull-right">
							<strong>分享人数</strong>
							<span>{{accountData.shareNum}}/人</span>
						</div>
						<div class="clear"></div>
					</div>
				</div>
			</div>

			<div class="personal-content">
				<div class="pson-wrap pson-qz mui-row">
					<div class="pson-item mui-col-xs-3" pageId="account-circle-diary">
						<a>
							<span ng-bind="accountData.diaryNum">0</span>
							<strong>日记</strong>
						</a>
					</div>
					<div class="pson-item mui-col-xs-3" pageId="account-circle-fans">
						<a>
							<span ng-bind="accountData.fansNum">0</span>
							<strong>粉丝</strong>
						</a>
					</div>
					<div class="pson-item mui-col-xs-3" pageId="account-circle-attention">
						<a>
							<span ng-bind="accountData.focusNum">0</span>
							<strong>关注</strong>
						</a>
					</div>
					<div class="pson-item mui-col-xs-3" pageId="account-messageCenter-news">
						<a>
							<span>0</span>
							<strong>消息</strong>
						</a>
					</div>
				</div>

				<div class="pson-wrap pson-bill mui-row" style="display: none;">
					<div class="pson-item mui-col-xs-3">
						<span class="iconfont icon-daifukuan"></span>
						<strong>待付款</strong>
					</div>
					<div class="pson-item mui-col-xs-3">
						<span class="iconfont icon-daishiyong"></span>
						<strong>待使用</strong>
					</div>
					<div class="pson-item mui-col-xs-3">
						<span class="iconfont icon-yuyue"></span>
						<strong>预约</strong>
					</div>
					<div class="pson-item mui-col-xs-3">
						<span class="iconfont icon-dangan fsize20"></span>
						<strong>全部账单</strong>
					</div>
				</div>

				<div class="pson-wrap pson-box mui-row">
					<a pageId="account-orderForm-index" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-dingdan2 fsize38"></span>
						<strong>我的订单</strong>
					</a>
					<a pageId="" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-jiarugouwuche fsize38"></span>
						<strong>购物车</strong>
					</a>
					<a pageId="account-archives-health" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-jiankang"></span>
						<strong>健康档案</strong>
					</a>
					<a pageId="account-archives-beautiful" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-home2"></span>
						<strong>美丽档案</strong>
					</a>
					<a pageId="account-debt-index" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-fenqi"></span>
						<strong>我的分期</strong>
					</a>
					<a pageId="account-generalize-member" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-yaoqing"></span>
						<strong>我的分享</strong>
					</a>
					<a pageId="account-generalize-channel" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-wodekehu"></span>
						<strong>我的客户</strong>
					</a>
					<a pageId="account-generalize-commision" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-yongjin"></span>
						<strong>佣金</strong>
					</a>
					<a pageId="account-generalize-QRCode" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-yaoqinghaoyou"></span>
						<strong>邀请好友</strong>
					</a>
					<a pageId="account-collect-index" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-shoucang"></span>
						<strong>收藏</strong>
					</a>
					<a pageId="account-more-propose" class="pson-item mui-col-xs-3">
						<span class="iconfont icon-jianyi"></span>
						<strong>意见反馈</strong>
					</a>
				</div>

			</div>

		</div>
	</body>
	<script src="../../js/mui.min.js"></script>
	<script src="../../js/angular.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/JRZH.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/common.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/app.js" type="text/javascript" charset="utf-8"></script>
	<script src="../../js/appdata.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		//启用双击监听
		angular.module("jrzhApp", [])
			.controller("jrzhCtrl", function($scope) {
				$scope.accountData = {};
				var preloadpages = [{
					url: "orderForm/index.html", //我的订单
					id: "account-orderForm-index"
				}, {
					url: "archives/health.html", //健康档案
					id: "account-archives-health"
				}, {
					url: "archives/beautiful.html", //美丽档案
					id: "account-archives-beautiful"
				}, {
					url: "debt/index.html", // 我的分期
					id: "account-debt-index"
				}, {
					url: "generalize/member.html", //我的分享
					id: "account-generalize-member"
				}, {
					url: "generalize/channel.html", //我的客户
					id: "account-generalize-channel"
				}, {
					url: "generalize/commision.html", //佣金
					id: "account-generalize-commision"
				}, {
					url: "collect/index.html", //收藏
					id: "account-collect-index"
				}, {
					url: "circle/diary.html", //日记
					id: "account-circle-diary"
				}, {
					url: "circle/fans.html", //粉丝
					id: "account-circle-fans"
				}, {
					url: "circle/attention.html", //关注
					id: "account-circle-attention"
				}, {
					url: "messageCenter/news.html", //消息
					id: "account-messageCenter-news"
				}, {
					url: "generalize/QRCode.html", //邀请好友
					id: "account-generalize-QRCode"
				}, {
					url: "../more/propose.html", //意见反馈
					id: "account-more-propose"
				}];
				var pagesKeyValue = {};
				mui(preloadpages).each(function() {
					pagesKeyValue[this.id] = this.url;
				});
				mui.init({
					preloadPages: preloadpages,
				});
				mui.ready(function() {
					//获取用户基础数据
					var state = app.getState("$state");
					appData.personalInfo({
						userId: state.userId
					}, function(response) {
						$scope.accountData = response.object;
						$scope.$apply();
					}, function(err) {
						console.log(err);
					});

				});
				//绑定功能页面按钮 - 九宫格
				mui(".personal-content").on("tap", ".pson-item", function() {

					var pageId = this.getAttribute("pageId") || "";
					if(pageId.length <= 0) return;
					mui.openWindow({
						url: pagesKeyValue[pageId],
						id: pageId
					}); 

				});
				//				/*
				//				 * 消息
				//				 */
				//				function openNews() {
				//					var _view = mui.openWindow({
				//						url: "messageCenter/news.html",
				//						id: "account-messageCenter-news"
				//					});
				//					_view.show("slide-in-right");
				//				};
				//				/*
				//				 * 邀请好友
				//				 */
				//				function openQRCode() {
				//					var _view = mui.openWindow({
				//						url: "generalize/QRCode.html",
				//						id: "account-generalize-QRCode"
				//					});
				//					_view.show("slide-in-right");
				//				};
				//				/*
				//				 * 意见反馈
				//				 */
				//				function openPropose() {
				//					var _view = mui.openWindow({
				//						url: "../more/propose.html",
				//						id: "account-more-propose"
				//					});
				//					_view.show("slide-in-right");
				//				};

				//				/*
				//				 * 粉丝
				//				 */
				//				function openFollow() {
				//					var _view = mui.openWindow({
				//						url: "circle/follow.html",
				//						id: "account-circle-follow"
				//					});
				//					_view.show("slide-in-right");
				//				};
				//				/*
				//				 * 关注
				//				 */
				//				function openFollower() {
				//					var _view = mui.openWindow({
				//						url: "circle/follower.html",
				//						id: "account-circle-follower"
				//					});
				//					_view.show("slide-in-right");
				//				};
			});
	</script>

</html>